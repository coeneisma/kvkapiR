---
title: "kvkapiR"
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The goal of kvkapiR is to provides a convenient R programming language interface to the Dutch Chamber of Commerce (KvK) Search API. This package is built using the `httr2` package and follows best practices for wrapping APIs in R, as outlined in the httr2 documentation (<https://httr2.r-lib.org/articles/wrapping-apis.html>). It simplifies authentication, request handling, and response parsing when interacting with the KvK API.

Currently, the package only provides access to the [KvK search API](https://developers.kvk.nl/apis/zoeken). Additional APIs are available; more details can be found on the  [on the developers website of the KvK](https://developers.kvk.nl/apis).


## Loading the package

```{r}
library(kvkapiR)
```

## Searching the KvK API

Dit package `kvkapiR` is niks anders dan een simpele wrapper om de Kvk-API. Hiernaast worden een aantal voorbeelden gegeven van mogelijke zoekopdrachten en het resultaat dat door de package wordt gegeven.

### Example 1: single variable, less then 1.000 records

Lets start with searching for KvK registrations in [the village of Koudum](https://nl.wikipedia.org/wiki/Koudum). As this is a relative small village with less entries than the maximum (API limit) of 1.000 records, all records are retrieved:

```{r}
koudum <- kvk_search(plaats = "Koudum")
koudum
```

### Example 2: single variable, more then 1.000 records

The [city of Rotterdam](https://nl.wikipedia.org/wiki/Rotterdam) is much bigger than Koudum. So searching for all entries in Rotterdam will definately result in more then 1.000 records. When this happens, a warning will be displayed:

```{r}
rotterdam <- kvk_search(plaats = "Rotterdam")
rotterdam
```

### Example 3: multiple variables

As described in the documentation of `search_kvk()`, there are multiple variables to search in. And you can combine them. For example, we will search for a record in Utrecht with a name that contains both `snackbar` and `hoek`:

```{r}
snackbar <- kvk_search(plaats = "Utrecht", naam = "snackbar")
snackbar
```

### Example 4: search on adress

It is possible to search on a specific adres. You will need both the postcal code and the house number. For example, are there any registrations on [this adress](https://maps.app.goo.gl/KJhYVDH3fV8cxWJ2A)? 

```{r}
secret_adress <- kvk_search(postcode = "2594BD", huisnummer = "10")
secret_adress
```

